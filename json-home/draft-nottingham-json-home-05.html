<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Home Documents for HTTP APIs</title><script type="application/javascript">
function anchorRewrite() {
  map = { };
  if (window.location.hash.length >= 1) {
    var fragid = window.location.hash.substr(1);
    if (fragid) {
      if (! document.getElementById(fragid)) {
        var prefix = "rfc.";
        var mapped = map[fragid];
        if (mapped) {
          window.location.hash = mapped;
        } else if (fragid.indexOf("section-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(8);
        } else if (fragid.indexOf("appendix-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(9);
        } else if (fragid.indexOf("s-") == 0) {
          window.location.hash = prefix + "section." + fragid.substring(2);
        } else if (fragid.indexOf("p-") == 0) {
          var r = fragid.substring(2);
          var p = r.indexOf("-");
          if (p >= 0) {
            window.location.hash = prefix + "section." + r.substring(0, p) + ".p." + r.substring(p + 1);
          }
        }
      }
    }  
  }
}
window.addEventListener('hashchange', anchorRewrite);
window.addEventListener('DOMContentLoaded', anchorRewrite);
</script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../Tools/bower_components/bootstrap/dist/css/bootstrap.min.css"><style type="text/css">
      body {
        padding-top: 80px;
        padding-bottom: 80px;
        position: relative;
      }
      .table.header th, .table.header td {
        border-top: none;
        padding: 0;
      }
      #rfc\.meta {
        width: 40%;
        float: right
      }
      #rfc\.toc > ul li {
        list-style: none;
      }
      .container .nav-sublist {
        padding-left: 20px;
        padding-right: 10px;
        font-size: 90%;
      }
      .container .navbar-brand {
        padding-top: 0;
      }
      .container .nav > li > a {
        padding: 10px 7px 5px 15px;
        display: inline-block;
      }
      .container .nav > li > a + a {
        padding: 10px 15px 5px 7px;
        display: inline-block;
      }
      .container .nav > li > a {
        padding: 5px 10px;
      }
      .filename {
        color: rgb(119, 119, 119);
        font-size: 23px;
        font-weight: normal;
        height: auto;
        line-height: 23px;
      }
      dl {
        margin-left: 1em;
      }
      dl.dl-horizontal: {
        margin-left: 0;
      }
      dl > dt {
        float: left;
        margin-right: 1em;
      }
      dl.nohang > dt {
        float: none;
      }
      dl > dd {
        margin-bottom: .5em;
      }
      dl.compact > dd {
        margin-bottom: 0em;
      }
      dl > dd > dl {
        margin-top: 0.5em;
        margin-bottom: 0em;
      }
      ul.empty {
        list-style-type: none;
      }
      ul.empty li {
        margin-top: .5em;
      }
      td.reference {
        padding-right: 1em;
        vertical-align: top;
      }
      .feedback {
        position: fixed;
        bottom: 5px;
        right: 5px;
      }
      .fbbutton {
        margin-left: 5px;
      }
      h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
        color: rgb(51, 51, 51);
      }
      span.tt {
        font: 11pt consolas, monospace;
        font-size-adjust: none;
      }
    </style><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 API Home Documents" href="#rfc.section.2"><link rel="Chapter" title="3 API Objects" href="#rfc.section.3"><link rel="Chapter" title="4 Resource Objects" href="#rfc.section.4"><link rel="Chapter" title="5 Resource Hints" href="#rfc.section.5"><link rel="Chapter" title="6 Representation Hints" href="#rfc.section.6"><link rel="Chapter" title="7 Security Considerations" href="#rfc.section.7"><link rel="Chapter" title="8 IANA Considerations" href="#rfc.section.8"><link rel="Chapter" href="#rfc.section.9" title="9 References"><link rel="Appendix" title="A Acknowledgements" href="#rfc.section.A"><link rel="Appendix" title="B Considerations for Creating and Serving Home Documents" href="#rfc.section.B"><link rel="Appendix" title="C Considerations for Consuming Home Documents" href="#rfc.section.C"><link rel="Appendix" title="D Frequently Asked Questions" href="#rfc.section.D"><meta name="generator" content="https://github.com/mnot/RFCBootstrap XSLT vendor: Saxonica http://www.saxonica.com/"><meta name="keywords" content="Internet-Draft"><link rel="schema.dcterms" href="http://purl.org/dc/terms/"><meta name="dcterms.creator" content="Nottingham, M."><meta name="dcterms.identifier" content="urn:ietf:id:draft-nottingham-json-home-05"><meta name="dcterms.issued" content="2016-11-23"><meta name="dcterms.abstract" content="This document proposes a “home document” format for non-browser HTTP clients."><meta name="description" content="This document proposes a “home document” format for non-browser HTTP clients."></head><body><div class="container" id="top"><div class="row"><div class="col-md-4 col-md-push-8 hidden-sm hidden-xs" role="navigation"><div class="navbar"><div class="navbar-brand"><a href="#top">Internet-Draft</a></div><br clear="all"><div class=""><div id="rfc..toc"><ul class="nav"><li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#introduction">Introduction</a><ul><li><a href="#rfc.section.1.1">1.1</a>&nbsp;&nbsp;&nbsp;<a href="#notational-conventions">Notational Conventions</a></li></ul></li><li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#api-home-documents">API Home Documents</a></li><li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#api-object">API Objects</a></li><li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#resource-object">Resource Objects</a><ul><li><a href="#rfc.section.4.1">4.1</a>&nbsp;&nbsp;&nbsp;<a href="#resolving-templated-links">Resolving Templated Links</a></li></ul></li><li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#resource_hints">Resource Hints</a><ul><li><a href="#rfc.section.5.1">5.1</a>&nbsp;&nbsp;&nbsp;<a href="#allow">allow</a></li><li><a href="#rfc.section.5.2">5.2</a>&nbsp;&nbsp;&nbsp;<a href="#formats">formats</a></li><li><a href="#rfc.section.5.3">5.3</a>&nbsp;&nbsp;&nbsp;<a href="#acceptpatch">acceptPatch</a></li><li><a href="#rfc.section.5.4">5.4</a>&nbsp;&nbsp;&nbsp;<a href="#acceptpost">acceptPost</a></li><li><a href="#rfc.section.5.5">5.5</a>&nbsp;&nbsp;&nbsp;<a href="#acceptranges">acceptRanges</a></li><li><a href="#rfc.section.5.6">5.6</a>&nbsp;&nbsp;&nbsp;<a href="#acceptprefer">acceptPrefer</a></li><li><a href="#rfc.section.5.7">5.7</a>&nbsp;&nbsp;&nbsp;<a href="#docs">docs</a></li><li><a href="#rfc.section.5.8">5.8</a>&nbsp;&nbsp;&nbsp;<a href="#preconditionrequired">preconditionRequired</a></li><li><a href="#rfc.section.5.9">5.9</a>&nbsp;&nbsp;&nbsp;<a href="#authschemes">authSchemes</a></li><li><a href="#rfc.section.5.10">5.10</a>&nbsp;&nbsp;&nbsp;<a href="#status">status</a></li></ul></li><li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#representation_hints">Representation Hints</a></li><li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security Considerations</a></li><li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA Considerations</a><ul><li><a href="#rfc.section.8.1">8.1</a>&nbsp;&nbsp;&nbsp;<a href="#resource_hint_registry">HTTP Resource Hint Registry</a></li><li><a href="#rfc.section.8.2">8.2</a>&nbsp;&nbsp;&nbsp;<a href="#representation_hint_registry">HTTP Representation Hint Registry</a></li><li><a href="#rfc.section.8.3">8.3</a>&nbsp;&nbsp;&nbsp;<a href="#media-type-registration">Media Type Registration</a></li></ul></li><li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul><li><a href="#rfc.section.9.1">9.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li><li><a href="#rfc.section.9.2">9.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.section.A">A.</a>&nbsp;&nbsp;&nbsp;<a href="#acknowledgements">Acknowledgements</a></li><li><a href="#rfc.section.B">B.</a>&nbsp;&nbsp;&nbsp;<a href="#considerations-for-creating-and-serving-home-documents">Considerations for Creating and Serving Home Documents</a><ul><li><a href="#rfc.section.B.1">B.1</a>&nbsp;&nbsp;&nbsp;<a href="#managing-change-in-home-documents">Managing Change in Home Documents</a></li><li><a href="#rfc.section.B.2">B.2</a>&nbsp;&nbsp;&nbsp;<a href="#evolving-and-mixing-apis-with-home-documents">Evolving and Mixing APIs with Home Documents</a></li></ul></li><li><a href="#rfc.section.C">C.</a>&nbsp;&nbsp;&nbsp;<a href="#considerations-for-consuming-home-documents">Considerations for Consuming Home Documents</a></li><li><a href="#rfc.section.D">D.</a>&nbsp;&nbsp;&nbsp;<a href="#frequently-asked-questions">Frequently Asked Questions</a><ul><li><a href="#rfc.section.D.1">D.1</a>&nbsp;&nbsp;&nbsp;<a href="#why-doesnt-the-format-allow-references-or-inheritance">Why doesn’t the format allow references or inheritance?</a></li><li><a href="#rfc.section.D.2">D.2</a>&nbsp;&nbsp;&nbsp;<a href="#what-about-faults-ie-errors">What about “Faults” (i.e., errors)?</a></li><li><a href="#rfc.section.D.3">D.3</a>&nbsp;&nbsp;&nbsp;<a href="#how-do-i-find-the-schema-for-a-format">How Do I find the schema for a format?</a></li><li><a href="#rfc.section.D.4">D.4</a>&nbsp;&nbsp;&nbsp;<a href="#how-do-i-express-complex-query-arguments">How do I express complex query arguments?</a></li></ul></li><li><a href="#rfc.authors">Author's Address</a></li></ul></div></div></div></div><div class="col-md-8 col-md-pull-4 main" role="main"><header><table class="table table-condensed header" id="rfc.headerblock"><tbody><tr><td class="text-left">Network Working Group</td><td class="text-right">M. Nottingham</td></tr><tr><td class="text-left">Internet-Draft</td><td class="text-right">November 23, 2016</td></tr><tr><td class="text-left">Intended status: Informational</td><td class="text-right"></td></tr><tr><td class="text-left">Expires: May 27, 2017</td><td class="text-right"></td></tr></tbody></table><div id="rfc.title"><h1>Home Documents for HTTP APIs</h1><div class="filename">draft-nottingham-json-home-05</div></div></header><hr><h2 id="rfc..abstract"><a href="#rfc..abstract">Abstract</a></h2><div class="lead"><p>This document proposes a “home document” format for non-browser HTTP clients.</p></div><section id="rfc.note.1"><h2><a href="#rfc.note.1">Note to Readers</a></h2><p>The issues list for this draft can be found at <a href="https://github.com/mnot/I-D/labels/json-home">https://github.com/mnot/I-D/labels/json-home</a>.</p><p>The most recent (often, unpublished) draft is at <a href="https://mnot.github.io/I-D/json-home/">https://mnot.github.io/I-D/json-home/</a>.</p><p>Recent changes are listed at <a href="https://github.com/mnot/I-D/commits/gh-pages/json-home">https://github.com/mnot/I-D/commits/gh-pages/json-home</a>.</p><p>For information about implementations, see <a href="https://github.com/mnot/I-D/wiki/json-home">https://github.com/mnot/I-D/wiki/json-home</a>.</p></section><section id="rfc.status"><h2><a href="#rfc.status">Status of this Memo</a></h2><p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work in progress”.</p><p>This Internet-Draft will expire on May 27, 2017.</p></section><section id="rfc.copyrightnotice"><h2><a href="#rfc.copyrightnotice">Copyright Notice</a></h2><p>Copyright © 2016 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p></section><section id="introduction"><h2 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;<a href="#introduction">Introduction</a></h2><div id="rfc.section.1.p.1"><p>It is becoming increasingly common to use HTTP <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a> for applications other than traditional Web browsing. Such “HTTP APIs” are used to integrate processes on disparate systems, make information available to machines across the Internet, and as part of the implementation of “micro-services.”</p></div><div id="rfc.section.1.p.2"><p>By using HTTP, these applications realise a number of benefits, from message framing to caching, and well-defined semantics that are broadly understood and useful.</p></div><div id="rfc.section.1.p.3"><p>However, one of the core architectural tenants of the Web is the use of links <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> to navigate between states; typically, these applications document static URLs that clients need to know and servers need to implement, and any interaction outside of these bounds is uncharted territory.</p></div><div id="rfc.section.1.p.4"><p>In contrast, a link-driven application discovers relevant resources at run time, using a shared vocabulary of link relations <a href="#RFC5988"><cite title="Web Linking">[RFC5988]</cite></a> and internet media types <a href="#RFC6838"><cite title="Media Type Specifications and Registration Procedures">[RFC6838]</cite></a> to support a “follow your nose” style of interaction.</p></div><div id="rfc.section.1.p.5"><p>A client can then decide which resources to interact with “on the fly” based upon its capabilities (as described by link relations), and the server can safely add new resources and formats without disturbing clients that are not yet aware of them.</p></div><div id="rfc.section.1.p.6" class="avoidbreakafter"><p>Doing so can provide any of a number of benefits, including:</p></div><div id="rfc.section.1.p.7"><ul><li>Extensibility - Because new server capabilities can be expressed as link relations, new features can be layered in without introducing a new API version; clients will discover them in the home document. This promotes loose coupling between clients and servers.</li><li>Evolvability - Likewise, interfaces can change gradually by introducing a new link relation and/or format while still supporting the old ones.</li><li>Customisation - Home documents can be tailored for the client, allowing diffrent classes of service or different client permissions to be exposed naturally.</li><li>Flexible deployment - Since URLs aren’t baked into documentation, the server can choose what URLs to use for a given service.</li><li>API mixing - Likewise, more than one API can be deployed on a given server, without fear of collisions.</li></ul></div><div id="rfc.section.1.p.8"><p>Whether an application ought to use links in this fashion depends on how it is deployed; generally, the most benefit will be received when multiple instances of the service are deployed, possibly with different versions, and they are consumed by clients with different capabilities. In particular, Internet Standards that use HTTP as a substrate are likely to require the attributes described above.</p></div><div id="rfc.section.1.p.9"><p>Clients need to be able to discover information about these applications to use it efficiently; just as with a human-targeted “home page” for a site, there is a need for a “home document” for a HTTP API that describes it to non-browser clients.</p></div><div id="rfc.section.1.p.10"><p>Of course, an HTTP API might use any format to do so; however, there are advantages to having a common home document format. This specification defines one, using the JSON format <a href="#RFC7159"><cite title="The JavaScript Object Notation (JSON) Data Interchange Format">[RFC7159]</cite></a>.</p></div><section id="notational-conventions"><h3 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1</a>&nbsp;<a href="#notational-conventions">Notational Conventions</a></h3><div id="rfc.section.1.1.p.1"><p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.</p></div></section></section><section id="api-home-documents"><h2 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#api-home-documents">API Home Documents</a></h2><div id="rfc.section.2.p.1"><p>An API Home Document (or, interchangeably, “home document”) uses the format described in <a href="#RFC7159"><cite title="The JavaScript Object Notation (JSON) Data Interchange Format">[RFC7159]</cite></a> and has the media type “application/json-home”.</p></div><div id="rfc.section.2.p.2" class="avoidbreakafter"><p>Its content consists of a root object with:</p></div><div id="rfc.section.2.p.3"><ul><li>A “resources” member, whose value is an object that describes the resources associated with the API. Its member names are link relation types (as defined by <a href="#RFC5988"><cite title="Web Linking">[RFC5988]</cite></a>), and their values are Resource Objects (<a href="#resource-object" title="Resource Objects">Section&nbsp;4</a>).</li><li>Optionally, a “api” member, whose value is an API Object (<a href="#api-object" title="API Objects">Section&nbsp;3</a>) that contains information about the API as a whole.</li></ul></div><div id="rfc.section.2.p.4" class="avoidbreakafter"><p>For example:</p></div><div id="rfc.figure.u.1"><pre>
  GET / HTTP/1.1
  Host: example.org
  Accept: application/json-home

  HTTP/1.1 200 OK
  Content-Type: application/json-home
  Cache-Control: max-age=3600
  Connection: close

  {
    "api": {
      "title": "Example API",
      "links": {
        "author": "mailto:api-admin@example.com",
        "describedBy": "https://example.com/api-docs/"
      }
    }
    "resources": {
      "tag:me@example.com,2016:widgets": {
        "href": "/widgets/"
      },
      "tag:me@example.com,2016:widget": {
        "hrefTemplate": "/widgets/{widget_id}",
        "hrefVars": {
          "widget_id": "https://example.org/param/widget"
        },
        "hints": {
          "allow": ["GET", "PUT", "DELETE", "PATCH"],
          "formats": {
            "application/json": {}
          },
          "acceptPatch": ["application/json-patch+json"],
          "acceptRanges": ["bytes"]
        }
      }
    }
  }
</pre></div><div id="rfc.section.2.p.5"><p>Here, we have a home document for the API “Example API”, whose author can be contacted at the e-mail address “api-admin@example.com”, and whose documentation is at “https://example.com/api-docs/”.</p></div><div id="rfc.section.2.p.6"><p>It links to a resource “/widgets/” with the relation “tag:me@example.com,2016:widgets”. It also links to an unknown number of resources with the relation type “tag:me@example.com,2016:widget” using a URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>, along with a mapping of identifiers to a variable for use in that template.</p></div><div id="rfc.section.2.p.7"><p>It also gives several hints about interacting with the latter “widget” resources, including the HTTP methods usable with them, the PATCH and POST formats they accept, and the fact that they support partial requests <a href="#RFC7233"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Range Requests">[RFC7233]</cite></a> using the “bytes” range-specifier.</p></div><div id="rfc.section.2.p.8"><p>It gives no such hints about the “widgets” resource. This does not mean that it (for example) doesn’t support any HTTP methods; it means that the client will need to discover this by interacting with the resource, and/or examining the documentation for its link relation type.</p></div><div id="rfc.section.2.p.9" class="avoidbreakafter"><p>Effectively, this names a set of behaviors, as described by a resource object, with a link relation type. This means that several link relations might apply to a common base URL; e.g.:</p></div><div id="rfc.figure.u.2"><pre>
{
  "resources": {
    "tag:me@example.com,2016:search-by-id": {
      "hrefTemplate": "/search?id={widget_id}",
      "hrefVars": {
        "widget_id": "https://example.org/param/widget_id"
      }
    },
    "tag:me@example.com,2016:search-by-name": {
      "hrefTemplate": "/search?name={widget_name}",
      "hrefVars": {
        "widget_name": "https://example.org/param/widget_name"
      }
    }
  }
}
</pre></div><div id="rfc.section.2.p.10"><p>Note that the examples above use both tag <a href="#RFC4151"><cite title="The 'tag' URI Scheme">[RFC4151]</cite></a> and https <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a> URIs; any URI scheme can be used to identify link relations and other artefacts in home documents.</p></div></section><section id="api-object"><h2 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#api-object">API Objects</a></h2><div id="rfc.section.3.p.1"><p>An API Object contains links to information about the API itself.</p></div><div id="rfc.section.3.p.2" class="avoidbreakafter"><p>Two members are defined:</p></div><div id="rfc.section.3.p.3"><ul><li>“title” has a string value indicating the name of the API;</li><li>“links” has an object value, whose member names are link relation types <a href="#RFC5988"><cite title="Web Linking">[RFC5988]</cite></a>, and values are URLs <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>. The context of these links is the API home document as a whole.</li></ul></div><div id="rfc.section.3.p.4"><p>Future members MAY be defined by specifications that update this document.</p></div></section><section id="resource-object"><h2 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#resource-object">Resource Objects</a></h2><div id="rfc.section.4.p.1"><p>A Resource Object links to resources of the defined type using one of two mechanisms; either a direct link (in which case there is exactly one resource of that relation type associated with the API), or a templated link, in which case there are zero to many such resources.</p></div><div id="rfc.section.4.p.2"><p>Direct links are indicated with an “href” property, whose value is a URI <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>.</p></div><div id="rfc.section.4.p.3"><p>Templated links are indicated with an “hrefTemplate” property, whose value is a URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>. When “hrefTemplate” is present, the Resource Object MUST have a “hrefVars” property; see “Resolving Templated Links”.</p></div><div id="rfc.section.4.p.4"><p>Resource Objects MUST have exactly one of the “href” and “href-vars” properties.</p></div><div id="rfc.section.4.p.5"><p>In both forms, the links that “href” and “hrefTemplate” refer to are URI-references <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> whose base URI is that of the API Home Document itself.</p></div><div id="rfc.section.4.p.6"><p>Resource Objects MAY also have a “hints” property, whose value is an object that uses named Resource Hints (see <a href="#resource_hints" title="Resource Hints">Section&nbsp;5</a>) as its properties.</p></div><section id="resolving-templated-links"><h3 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1</a>&nbsp;<a href="#resolving-templated-links">Resolving Templated Links</a></h3><div id="rfc.section.4.1.p.1"><p>A URI can be derived from a Templated Link by treating the “hrefTemplate” value as a Level 3 URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>, using the “hrefVars” property to fill the template.</p></div><div id="rfc.section.4.1.p.2"><p>The “hrefVars” property, in turn, is an object that acts as a mapping between variable names available to the template and absolute URIs that are used as global identifiers for the semantics and syntax of those variables.</p></div><div id="rfc.section.4.1.p.3" class="avoidbreakafter"><p>For example, given the following Resource Object:</p></div><div id="rfc.figure.u.3"><pre>
  "https://example.org/rel/widget": {
    "hrefTemplate": "/widgets/{widget_id}",
    "hrefVars": {
      "widget_id": "https://example.org/param/widget"
    },
    "hints": {
      "allow": ["GET", "PUT", "DELETE", "PATCH"],
      "formats": {
        "application/json": {}
      },
      "acceptPatch": ["application/json-patch+json"],
      "acceptRanges": ["bytes"]
    }
  }
</pre></div><div id="rfc.section.4.1.p.4"><p>If you understand that “https://example.org/param/widget” is an numeric identifier for a widget, you can then find the resource corresponding to widget number 12345 at “https://example.org/widgets/12345” (assuming that the Home Document is located at “https://example.org/”).</p></div></section></section><section id="resource_hints"><h2 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#resource_hints">Resource Hints</a></h2><div id="rfc.section.5.p.1"><p>Resource hints allow clients to find relevant information about interacting with a resource beforehand, as a means of optimizing communications, as well as advertising available behaviors (e.g., to aid in laying out a user interface for consuming the API).</p></div><div id="rfc.section.5.p.2"><p>Hints are just that – they are not a “contract”, and are to only be taken as advisory. The runtime behavior of the resource always overrides hinted information.</p></div><div id="rfc.section.5.p.3"><p>For example, a resource might hint that the PUT method is allowed on all “widget” resources. This means that generally, the user has the ability to PUT to a particular resource, but a specific resource might reject a PUT based upon access control or other considerations. More fine-grained information might be gathered by interacting with the resource (e.g., via a GET), or by another resource “containing” it (such as a “widgets” collection) or describing it (e.g., one linked to it with a “describedBy” link relation).</p></div><div id="rfc.section.5.p.4"><p>This specification defines a set of common hints, based upon information that’s discoverable by directly interacting with resources. See <a href="#resource_hint_registry" title="HTTP Resource Hint Registry">Section&nbsp;8.1</a> for information on defining new hints.</p></div><section id="allow"><h3 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a>&nbsp;<a href="#allow">allow</a></h3><div id="rfc.section.5.1.p.1"><ul><li>Resource Hint Name: allow</li><li>Description: Hints the HTTP methods that the current client will be able to use to interact with the resource; equivalent to the Allow HTTP response header.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.1.p.2"><p>Content MUST be an array of strings, containing HTTP methods.</p></div></section><section id="formats"><h3 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a>&nbsp;<a href="#formats">formats</a></h3><div id="rfc.section.5.2.p.1"><ul><li>Resource Hint Name: formats</li><li>Description: Hints the representation types that the resource produces and consumes, using the GET and PUT methods respectively, subject to the ‘allow’ hint.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.2.p.2"><p>Content MUST be an object, whose keys are media types, and values are objects containing Representation Hints (see <a href="#representation_hints" title="Representation Hints">Section&nbsp;6</a>).</p></div></section><section id="acceptpatch"><h3 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3</a>&nbsp;<a href="#acceptpatch">acceptPatch</a></h3><div id="rfc.section.5.3.p.1"><ul><li>Resource Hint Name: accept-Patch</li><li>Description: Hints the PATCH <a href="#RFC5789"><cite title="PATCH Method for HTTP">[RFC5789]</cite></a> request formats accepted by the resource for this client; equivalent to the Accept-Patch HTTP response header.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.3.p.2"><p>Content MUST be an array of strings, containing media types.</p></div><div id="rfc.section.5.3.p.3"><p>When this hint is present, “PATCH” SHOULD be listed in the “allow” hint.</p></div></section><section id="acceptpost"><h3 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4</a>&nbsp;<a href="#acceptpost">acceptPost</a></h3><div id="rfc.section.5.4.p.1"><ul><li>Resource Hint Name: acceptPost</li><li>Description: Hints the POST request formats accepted by the resource for this client.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.4.p.2"><p>Content MUST be an array of strings, containing media types.</p></div><div id="rfc.section.5.4.p.3"><p>When this hint is present, “POST” SHOULD be listed in the “allow” hint.</p></div></section><section id="acceptranges"><h3 id="rfc.section.5.5"><a href="#rfc.section.5.5">5.5</a>&nbsp;<a href="#acceptranges">acceptRanges</a></h3><div id="rfc.section.5.5.p.1"><ul><li>Resource Hint Name: acceptRanges</li><li>Description: Hints the range-specifiers available to the client for this resource; equivalent to the Accept-Ranges HTTP response header <a href="#RFC7233"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Range Requests">[RFC7233]</cite></a>.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.5.p.2"><p>Content MUST be an array of strings, containing HTTP range-specifiers (typically, “bytes”).</p></div></section><section id="acceptprefer"><h3 id="rfc.section.5.6"><a href="#rfc.section.5.6">5.6</a>&nbsp;<a href="#acceptprefer">acceptPrefer</a></h3><div id="rfc.section.5.6.p.1"><ul><li>Resource Hint Name: acceptPrefer</li><li>Description: Hints the preferences <a href="#RFC7240"><cite title="Prefer Header for HTTP">[RFC7240]</cite></a> supported by the resource. Note that, as per that specifications, a preference can be ignored by the server.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.6.p.2"><p>Content MUST be an array of strings, containing preferences.</p></div></section><section id="docs"><h3 id="rfc.section.5.7"><a href="#rfc.section.5.7">5.7</a>&nbsp;<a href="#docs">docs</a></h3><div id="rfc.section.5.7.p.1"><ul><li>Resource Hint Name: docs</li><li>Description: Hints the location for human-readable documentation for the relation type of the resource.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.7.p.2"><p>Content MUST be a string containing an absolute-URI <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> referring to documentation that SHOULD be in HTML format.</p></div></section><section id="preconditionrequired"><h3 id="rfc.section.5.8"><a href="#rfc.section.5.8">5.8</a>&nbsp;<a href="#preconditionrequired">preconditionRequired</a></h3><div id="rfc.section.5.8.p.1"><ul><li>Resource Hint Name: preconditionRequired</li><li>Description: Hints that the resource requires state-changing requests (e.g., PUT, PATCH) to include a precondition, as per <a href="#RFC7232"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests">[RFC7232]</cite></a>, to avoid conflicts due to concurrent updates.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.8.p.2"><p>Content MUST be an array of strings, with possible values “etag” and “last-modified” indicating type of precondition expected.</p></div></section><section id="authschemes"><h3 id="rfc.section.5.9"><a href="#rfc.section.5.9">5.9</a>&nbsp;<a href="#authschemes">authSchemes</a></h3><div id="rfc.section.5.9.p.1"><ul><li>Resource Hint Name: authSchemes</li><li>Description: Hints that the resource requires authentication using the HTTP Authentication Framework <a href="#RFC7235"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Authentication">[RFC7235]</cite></a>.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.9.p.2"><p>Content MUST be an array of objects, each with a “scheme” property containing a string that corresponds to a HTTP authentication scheme, and optionally a “realms” property containing an array of zero to many strings that identify protection spaces that the resource is a member of.</p></div><div id="rfc.section.5.9.p.3" class="avoidbreakafter"><p>For example, a Resource Object might contain the following hint:</p></div><div id="rfc.figure.u.4"><pre>
  {
    "authSchemes": [
      {
        "scheme": "Basic",
        "realms": ["private"]
      }
    ]
  }
</pre></div></section><section id="status"><h3 id="rfc.section.5.10"><a href="#rfc.section.5.10">5.10</a>&nbsp;<a href="#status">status</a></h3><div id="rfc.section.5.10.p.1"><ul><li>Resource Hint Name: status</li><li>Description: Hints the status of the resource.</li><li>Specification: [this document]</li></ul></div><div id="rfc.section.5.10.p.2" class="avoidbreakafter"><p>Content MUST be a string; possible values are:</p></div><div id="rfc.section.5.10.p.3"><ul><li>“deprecated” - indicates that use of the resource is not recommended, but it is still available.</li><li>“gone” - indicates that the resource is no longer available; i.e., it will return a 404 (Not Found) or 410 (Gone) HTTP status code if accessed.</li></ul></div></section></section><section id="representation_hints"><h2 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#representation_hints">Representation Hints</a></h2><div id="rfc.section.6.p.1"><p>TBD</p></div></section><section id="security-considerations"><h2 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#security-considerations">Security Considerations</a></h2><div id="rfc.section.7.p.1"><p>Clients need to exercise care when using hints. For example, a naive client might send credentials to a server that uses the auth-req hint, without checking to see if those credentials are appropriate for that server.</p></div></section><section id="iana-considerations"><h2 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a href="#iana-considerations">IANA Considerations</a></h2><section id="resource_hint_registry"><h3 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1</a>&nbsp;<a href="#resource_hint_registry">HTTP Resource Hint Registry</a></h3><div id="rfc.section.8.1.p.1"><p>This specification defines the HTTP Resource Hint Registry. See <a href="#resource_hints" title="Resource Hints">Section&nbsp;5</a> for a general description of the function of resource hints.</p></div><div id="rfc.section.8.1.p.2"><p>In particular, resource hints are generic; that is, they are potentially applicable to any resource, not specific to one application of HTTP, nor to one particular format. Generally, they ought to be information that would otherwise be discoverable by interacting with the resource.</p></div><div id="rfc.section.8.1.p.3"><p>Hint names MUST be composed of the lowercase letters (a-z), digits (0-9), underscores (“_”) and hyphens (“-“), and MUST begin with a lowercase letter.</p></div><div id="rfc.section.8.1.p.4"><p>Hint content SHOULD be described in terms of JSON <a href="#RFC7159"><cite title="The JavaScript Object Notation (JSON) Data Interchange Format">[RFC7159]</cite></a> constructs.</p></div><div id="rfc.section.8.1.p.5" class="avoidbreakafter"><p>New hints are registered using the Expert Review process described in <a href="#RFC5226"><cite title="Guidelines for Writing an IANA Considerations Section in RFCs">[RFC5226]</cite></a> to enforce the criteria above. Requests for registration of new resource hints are to use the following template:</p></div><div id="rfc.section.8.1.p.6"><ul><li>Resource Hint Name: [hint name]</li><li>Description: [a short description of the hint’s semantics]</li><li>Specification: [reference to specification document]</li></ul></div><div id="rfc.section.8.1.p.7"><p>Initial registrations are enumerated in <a href="#resource_hints" title="Resource Hints">Section&nbsp;5</a>.</p></div></section><section id="representation_hint_registry"><h3 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2</a>&nbsp;<a href="#representation_hint_registry">HTTP Representation Hint Registry</a></h3><div id="rfc.section.8.2.p.1"><p>TBD</p></div></section><section id="media-type-registration"><h3 id="rfc.section.8.3"><a href="#rfc.section.8.3">8.3</a>&nbsp;<a href="#media-type-registration">Media Type Registration</a></h3><div id="rfc.section.8.3.p.1"><p>TBD</p></div></section></section><section id="rfc.references"><h2 id="rfc.section.9"><a href="#rfc.section.9">9.</a> References</h2><section id="rfc.references.1"><h3 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1</a> Normative References</h3><dl class="dl-horizontal"><dt id="RFC2119">[RFC2119]</dt><dd>Bradner, S., “<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP&nbsp;14, RFC&nbsp;2119, <a href="http://dx.doi.org/10.17487/RFC2119">DOI&nbsp;10.17487/RFC2119</a>, March&nbsp;1997, &lt;<a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>&gt;.</dd><dt id="RFC3986">[RFC3986]</dt><dd>Berners-Lee, T., Fielding, R., and L. Masinter, “<a href="https://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>”, STD&nbsp;66, RFC&nbsp;3986, <a href="http://dx.doi.org/10.17487/RFC3986">DOI&nbsp;10.17487/RFC3986</a>, January&nbsp;2005, &lt;<a href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>&gt;.</dd><dt id="RFC5226">[RFC5226]</dt><dd>Narten, T. and H. Alvestrand, “<a href="https://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>”, BCP&nbsp;26, RFC&nbsp;5226, <a href="http://dx.doi.org/10.17487/RFC5226">DOI&nbsp;10.17487/RFC5226</a>, May&nbsp;2008, &lt;<a href="http://www.rfc-editor.org/info/rfc5226">http://www.rfc-editor.org/info/rfc5226</a>&gt;.</dd><dt id="RFC5988">[RFC5988]</dt><dd>Nottingham, M., “<a href="https://tools.ietf.org/html/rfc5988">Web Linking</a>”, RFC&nbsp;5988, <a href="http://dx.doi.org/10.17487/RFC5988">DOI&nbsp;10.17487/RFC5988</a>, October&nbsp;2010, &lt;<a href="http://www.rfc-editor.org/info/rfc5988">http://www.rfc-editor.org/info/rfc5988</a>&gt;.</dd><dt id="RFC6570">[RFC6570]</dt><dd>Gregorio, J., Fielding, R., Hadley, M., Nottingham, M., and D. Orchard, “<a href="https://tools.ietf.org/html/rfc6570">URI Template</a>”, RFC&nbsp;6570, <a href="http://dx.doi.org/10.17487/RFC6570">DOI&nbsp;10.17487/RFC6570</a>, March&nbsp;2012, &lt;<a href="http://www.rfc-editor.org/info/rfc6570">http://www.rfc-editor.org/info/rfc6570</a>&gt;.</dd><dt id="RFC7159">[RFC7159]</dt><dd>Bray, T., Ed., “<a href="https://tools.ietf.org/html/rfc7159">The JavaScript Object Notation (JSON) Data Interchange Format</a>”, RFC&nbsp;7159, <a href="http://dx.doi.org/10.17487/RFC7159">DOI&nbsp;10.17487/RFC7159</a>, March&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7159">http://www.rfc-editor.org/info/rfc7159</a>&gt;.</dd><dt id="RFC7234">[RFC7234]</dt><dd>Fielding, R., Ed., Nottingham, M., Ed., and J. Reschke, Ed., “<a href="https://tools.ietf.org/html/rfc7234">Hypertext Transfer Protocol (HTTP/1.1): Caching</a>”, RFC&nbsp;7234, <a href="http://dx.doi.org/10.17487/RFC7234">DOI&nbsp;10.17487/RFC7234</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7234">http://www.rfc-editor.org/info/rfc7234</a>&gt;.</dd></dl></section><section id="rfc.references.2"><h3 id="rfc.section.9.2"><a href="#rfc.section.9.2">9.2</a> Informative References</h3><dl class="dl-horizontal"><dt id="RFC4151">[RFC4151]</dt><dd>Kindberg, T. and S. Hawke, “<a href="https://tools.ietf.org/html/rfc4151">The 'tag' URI Scheme</a>”, RFC&nbsp;4151, <a href="http://dx.doi.org/10.17487/RFC4151">DOI&nbsp;10.17487/RFC4151</a>, October&nbsp;2005, &lt;<a href="http://www.rfc-editor.org/info/rfc4151">http://www.rfc-editor.org/info/rfc4151</a>&gt;.</dd><dt id="RFC5789">[RFC5789]</dt><dd>Dusseault, L. and J. Snell, “<a href="https://tools.ietf.org/html/rfc5789">PATCH Method for HTTP</a>”, RFC&nbsp;5789, <a href="http://dx.doi.org/10.17487/RFC5789">DOI&nbsp;10.17487/RFC5789</a>, March&nbsp;2010, &lt;<a href="http://www.rfc-editor.org/info/rfc5789">http://www.rfc-editor.org/info/rfc5789</a>&gt;.</dd><dt id="RFC6838">[RFC6838]</dt><dd>Freed, N., Klensin, J., and T. Hansen, “<a href="https://tools.ietf.org/html/rfc6838">Media Type Specifications and Registration Procedures</a>”, BCP&nbsp;13, RFC&nbsp;6838, <a href="http://dx.doi.org/10.17487/RFC6838">DOI&nbsp;10.17487/RFC6838</a>, January&nbsp;2013, &lt;<a href="http://www.rfc-editor.org/info/rfc6838">http://www.rfc-editor.org/info/rfc6838</a>&gt;.</dd><dt id="RFC7230">[RFC7230]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “<a href="https://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>”, RFC&nbsp;7230, <a href="http://dx.doi.org/10.17487/RFC7230">DOI&nbsp;10.17487/RFC7230</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7230">http://www.rfc-editor.org/info/rfc7230</a>&gt;.</dd><dt id="RFC7232">[RFC7232]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “<a href="https://tools.ietf.org/html/rfc7232">Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests</a>”, RFC&nbsp;7232, <a href="http://dx.doi.org/10.17487/RFC7232">DOI&nbsp;10.17487/RFC7232</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7232">http://www.rfc-editor.org/info/rfc7232</a>&gt;.</dd><dt id="RFC7233">[RFC7233]</dt><dd>Fielding, R., Ed., Lafon, Y., Ed., and J. Reschke, Ed., “<a href="https://tools.ietf.org/html/rfc7233">Hypertext Transfer Protocol (HTTP/1.1): Range Requests</a>”, RFC&nbsp;7233, <a href="http://dx.doi.org/10.17487/RFC7233">DOI&nbsp;10.17487/RFC7233</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7233">http://www.rfc-editor.org/info/rfc7233</a>&gt;.</dd><dt id="RFC7235">[RFC7235]</dt><dd>Fielding, R., Ed. and J. Reschke, Ed., “<a href="https://tools.ietf.org/html/rfc7235">Hypertext Transfer Protocol (HTTP/1.1): Authentication</a>”, RFC&nbsp;7235, <a href="http://dx.doi.org/10.17487/RFC7235">DOI&nbsp;10.17487/RFC7235</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7235">http://www.rfc-editor.org/info/rfc7235</a>&gt;.</dd><dt id="RFC7240">[RFC7240]</dt><dd>Snell, J., “<a href="https://tools.ietf.org/html/rfc7240">Prefer Header for HTTP</a>”, RFC&nbsp;7240, <a href="http://dx.doi.org/10.17487/RFC7240">DOI&nbsp;10.17487/RFC7240</a>, June&nbsp;2014, &lt;<a href="http://www.rfc-editor.org/info/rfc7240">http://www.rfc-editor.org/info/rfc7240</a>&gt;.</dd></dl></section></section><section id="acknowledgements"><h2 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;<a href="#acknowledgements">Acknowledgements</a></h2><div id="rfc.section.A.p.1"><p>Thanks to Jan Algermissen, Mike Amundsen, Bill Burke, Sven Dietze, Graham Klyne, Leif Hedstrom, Joe Hildebrand, Jeni Tennison, Erik Wilde and Jorge Williams for their suggestions and feedback.</p></div></section><section id="considerations-for-creating-and-serving-home-documents"><h2 id="rfc.section.B"><a href="#rfc.section.B">B.</a>&nbsp;<a href="#considerations-for-creating-and-serving-home-documents">Considerations for Creating and Serving Home Documents</a></h2><div id="rfc.section.B.p.1" class="avoidbreakafter"><p>When making an API home document available, there are a few things to keep in mind:</p></div><div id="rfc.section.B.p.2"><ul><li>A home document is best located at a memorable URI, because its URI will effectively become the URI for the API itself to clients.</li><li>Home documents can be personalized, just as “normal” home pages can. For example, you might advertise different URIs, and/or different kinds of link relations, depending on the client’s identity.</li><li>Home documents ought to be assigned a freshness lifetime (e.g., “Cache-Control: max-age=3600”) so that clients can cache them, to avoid having to fetch it every time the client interacts with the service.</li><li>Custom link relation types, as well as the URIs for variables, should lead to documentation for those constructs.</li></ul></div><section id="managing-change-in-home-documents"><h3 id="rfc.section.B.1"><a href="#rfc.section.B.1">B.1</a>&nbsp;<a href="#managing-change-in-home-documents">Managing Change in Home Documents</a></h3><div id="rfc.section.B.1.p.1"><p>The URIs used in API home documents MAY change over time. However, changing them can cause issues for clients that are relying on cached home documents containing old links.</p></div><div id="rfc.section.B.1.p.2" class="avoidbreakafter"><p>To mitigate the impact of such changes, servers ought to consider:</p></div><div id="rfc.section.B.1.p.3"><ul><li>Reducing the freshness lifetime of home documents before a link change, so that clients are less likely to refer to an “old” document.</li><li>Regarding the “old” and “new” URIs as equally valid references for an “overlap” period.</li><li>After that period, handling requests for the “old” URIs appropriately; e.g., with a 404 Not Found, or by redirecting the client to the new URI.</li></ul></div></section><section id="evolving-and-mixing-apis-with-home-documents"><h3 id="rfc.section.B.2"><a href="#rfc.section.B.2">B.2</a>&nbsp;<a href="#evolving-and-mixing-apis-with-home-documents">Evolving and Mixing APIs with Home Documents</a></h3><div id="rfc.section.B.2.p.1"><p>Using home documents affords the opportunity to change the “shape” of the API over time, without breaking old clients.</p></div><div id="rfc.section.B.2.p.2"><p>This includes introducing new functions alongside the old ones – by adding new link relation types with corresponding resource objects – as well as adding new template variables, media types, and so on.</p></div><div id="rfc.section.B.2.p.3"><p>It’s important to realise that a home document can serve more than one “API” at a time; by listing all relevant relation types, it can effectively “mix” different APIs, allowing clients to work with different resources as they see fit.</p></div></section></section><section id="considerations-for-consuming-home-documents"><h2 id="rfc.section.C"><a href="#rfc.section.C">C.</a>&nbsp;<a href="#considerations-for-consuming-home-documents">Considerations for Consuming Home Documents</a></h2><div id="rfc.section.C.p.1"><p>Clients might use home documents in a variety of ways.</p></div><div id="rfc.section.C.p.2"><p>In the most common case – actually consuming the API – the client will scan the Resources Object for the link relation(s) that it is interested in, and then to interact with the resource(s) referred to. Resource Hints can be used to optimize communication with the client, as well as to inform as to the permissible actions (e.g., whether PUT is likely to be supported).</p></div><div id="rfc.section.C.p.3"><p>Note that the home document is a “living” document; it does not represent a “contract”, but rather is expected to be inspected before each interaction. In particular, links from the home document MUST NOT be assumed to be valid beyond the freshness lifetime of the home document, as per HTTP’s caching model <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>.</p></div><div id="rfc.section.C.p.4"><p>As a result, clients ought to cache the home document (as per <a href="#RFC7234"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Caching">[RFC7234]</cite></a>), to avoid fetching it before every interaction (which would otherwise be required).</p></div><div id="rfc.section.C.p.5"><p>Likewise, a client encountering a 404 Not Found on a link is encouraged obtain a fresh copy of the home document, to assure that it is up-to-date.</p></div></section><section id="frequently-asked-questions"><h2 id="rfc.section.D"><a href="#rfc.section.D">D.</a>&nbsp;<a href="#frequently-asked-questions">Frequently Asked Questions</a></h2><section id="why-doesnt-the-format-allow-references-or-inheritance"><h3 id="rfc.section.D.1"><a href="#rfc.section.D.1">D.1</a>&nbsp;<a href="#why-doesnt-the-format-allow-references-or-inheritance">Why doesn’t the format allow references or inheritance?</a></h3><div id="rfc.section.D.1.p.1"><p>Adding inheritance or references would allow more modularity in the format and make it more compact, at the cost of considerable complexity and the associated potential for errors (both in the specification and by its users).</p></div><div id="rfc.section.D.1.p.2"><p>Since good tools and compression are effective ways to achieve the same ends, this specification doesn’t attempt them.</p></div></section><section id="what-about-faults-ie-errors"><h3 id="rfc.section.D.2"><a href="#rfc.section.D.2">D.2</a>&nbsp;<a href="#what-about-faults-ie-errors">What about “Faults” (i.e., errors)?</a></h3><div id="rfc.section.D.2.p.1"><p>In HTTP, errors are conveyed by HTTP status codes. While this specification could (and even may) allow enumeration of possible error conditions, there’s a concern that this will encourage applications to define many such “faults”, leading to tight coupling between the application and its clients.</p></div></section><section id="how-do-i-find-the-schema-for-a-format"><h3 id="rfc.section.D.3"><a href="#rfc.section.D.3">D.3</a>&nbsp;<a href="#how-do-i-find-the-schema-for-a-format">How Do I find the schema for a format?</a></h3><div id="rfc.section.D.3.p.1"><p>That isn’t addressed by home documents. Ultimately, it’s up to the media type accepted and generated by resources to define and constrain (or not) their syntax.</p></div></section><section id="how-do-i-express-complex-query-arguments"><h3 id="rfc.section.D.4"><a href="#rfc.section.D.4">D.4</a>&nbsp;<a href="#how-do-i-express-complex-query-arguments">How do I express complex query arguments?</a></h3><div id="rfc.section.D.4.p.1"><p>Complex queries – i.e., those that exceed the expressive power of Link Templates or would require ambiguous properties of a “resources” object – aren’t intended to be defined by a home document. The appropriate way to do this is with a “form” language, much as HTML defines.</p></div><div id="rfc.section.D.4.p.2"><p>Note that it is possible to support multiple query syntaxes on the same base URL, using more than one link relation type; see the example at the start of the document.</p></div></section></section><section id="rfc.authors" class="avoidbreakinside"><h2><a href="#rfc.authors">Author's Address</a></h2><p><b>Mark Nottingham</b><br>EMail: <a href="mailto:mnot@mnot.net">mnot@mnot.net</a><br>URI: <a href="https://www.mnot.net/">https://www.mnot.net/</a></p></section></div></div></div><script src="../Tools/bower_components/jquery/dist/jquery.min.js"></script><script src="../Tools/bower_components/bootstrap/dist/js/bootstrap.min.js"></script></body></html>