<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en"><head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/"><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><title>Home Documents for HTTP APIs</title><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a.smpl {
  color: black;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  color: black;
  font-family: verdana, helvetica, arial, sans-serif;
  font-size: 10pt;
}
cite {
  font-style: normal;
}
dd {
  margin-right: 2em;
}
dl {
  margin-left: 2em;
}

ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}
dl p {
  margin-left: 0em;
}
dt {
  margin-top: .5em;
}
h1 {
  font-size: 14pt;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h1 a {
  color: #333333;
}
h2 {
  font-size: 12pt;
  line-height: 15pt;
  page-break-after: avoid;
}
h3, h4, h5, h6 {
  font-size: 10pt;
  page-break-after: avoid;
}
h2 a, h3 a, h4 a, h5 a, h6 a {
  color: black;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
  margin-right: 2em;
}
ol {
  margin-left: 2em;
  margin-right: 2em;
}
ol.la {
  list-style-type: lower-alpha;
}
ol.ua {
  list-style-type: upper-alpha;
}
ol p {
  margin-left: 0em;
}
p {
  margin-left: 2em;
  margin-right: 2em;
}
pre {
  margin-left: 3em;
  background-color: lightyellow;
  padding: .25em;
}
pre.text2 {
  border-style: dotted;
  border-width: 1px;
  background-color: #f0f0f0;
  width: 69em;
}
pre.inline {
  background-color: white;
  padding: 0em;
}
pre.text {
  border-style: dotted;
  border-width: 1px;
  background-color: #f8f8f8;
  width: 69em;
}
pre.drawing {
  border-style: solid;
  border-width: 1px;
  background-color: #f8f8f8;
  padding: 2em;
}
table {
  margin-left: 2em;
}
table.header {
  border-spacing: 1px;
  width: 95%;
  font-size: 10pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap; 
}
table.header td {
  background-color: gray;
  width: 50%;
}
table.header a {
  color: white;
}
td.reference {
  vertical-align: top;
  white-space: nowrap;
  padding-right: 1em;
}
thead {
  display:table-header-group;
}
ul.toc, ul.toc ul {
  list-style: none;
  margin-left: 1.5em;
  margin-right: 0em;
  padding-left: 0em;
}
ul.toc li {
  line-height: 150%;
  font-weight: bold;
  font-size: 10pt;
  margin-left: 0em;
  margin-right: 0em;
}
ul.toc li li {
  line-height: normal;
  font-weight: normal;
  font-size: 9pt;
  margin-left: 0em;
  margin-right: 0em;
}
li.excluded {
  font-size: 0pt;
}
ul p {
  margin-left: 0em;
}

.comment {
  background-color: yellow;
}
.center {
  text-align: center;
}
.error {
  color: red;
  font-style: italic;
  font-weight: bold;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 9pt;
}
.filename {
  color: #333333;
  font-weight: bold;
  font-size: 12pt;
  line-height: 21pt;
  text-align: center;
}
.fn {
  font-weight: bold;
}
.hidden {
  display: none;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.title {
  color: #990000;
  font-size: 18pt;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
  margin-top: 36pt;
}
.vcardline {
  display: block;
}
.warning {
  font-size: 14pt;
  background-color: yellow;
}


@media print {
  .noprint {
    display: none;
  }
  
  a {
    color: black;
    text-decoration: none;
  }

  table.header {
    width: 90%;
  }

  td.header {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 12pt;
  }

  ul.toc a::after {
    content: leader('.') target-counter(attr(href), page);
  }
  
  ul.ind li li a {
    content: target-counter(attr(href), page);
  }
  
  .print2col {
    column-count: 2;
    -moz-column-count: 2;
    column-fill: auto;
  }
}

@page {
  @top-left {
       content: "Internet-Draft"; 
  } 
  @top-right {
       content: "September 2012"; 
  } 
  @top-center {
       content: "Home Documents for HTTP APIs"; 
  } 
  @bottom-left {
       content: "Nottingham"; 
  } 
  @bottom-center {
       content: "Expires March 17, 2013"; 
  } 
  @bottom-right {
       content: "[Page " counter(page) "]"; 
  } 
}

@page:first { 
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><link rel="Contents" href="#rfc.toc"><link rel="Author" href="#rfc.authors"><link rel="Copyright" href="#rfc.copyrightnotice"><link rel="Chapter" title="1 Introduction" href="#rfc.section.1"><link rel="Chapter" title="2 Requirements" href="#rfc.section.2"><link rel="Chapter" title="3 JSON Home Documents" href="#rfc.section.3"><link rel="Chapter" title="4 Resource Objects" href="#rfc.section.4"><link rel="Chapter" title="5 Resource Hints" href="#rfc.section.5"><link rel="Chapter" title="6 Creating and Serving Home Documents" href="#rfc.section.6"><link rel="Chapter" title="7 Consuming Home Documents" href="#rfc.section.7"><link rel="Chapter" title="8 Security Considerations" href="#rfc.section.8"><link rel="Chapter" title="9 IANA Considerations" href="#rfc.section.9"><link rel="Chapter" href="#rfc.section.10" title="10 References"><link rel="Appendix" title="A Acknowledgements" href="#rfc.section.A"><link rel="Appendix" title="B Frequently Asked Questions" href="#rfc.section.B"><link rel="Appendix" title="C Open Issues" href="#rfc.section.C"><meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.576, 2012-05-02 14:26:45, XSLT vendor: SAXON 9.1.0.8 from Saxonica http://www.saxonica.com/"><link rel="schema.dct" href="http://purl.org/dc/terms/"><meta name="dct.creator" content="Nottingham, M."><meta name="dct.identifier" content="urn:ietf:id:draft-nottingham-json-home-02"><meta name="dct.issued" scheme="ISO8601" content="2012-09-13"><meta name="dct.abstract" content="This document proposes a &#34;home document&#34; format for non-browser HTTP clients."><meta name="description" content="This document proposes a &#34;home document&#34; format for non-browser HTTP clients."></head><body><table class="header"><tbody><tr><td class="left">Network Working Group</td><td class="right">M. Nottingham</td></tr><tr><td class="left">Internet-Draft</td><td class="right">September 13, 2012</td></tr><tr><td class="left">Intended status: Informational</td><td class="right"></td></tr><tr><td class="left">Expires: March 17, 2013</td><td class="right"></td></tr></tbody></table><p class="title">Home Documents for HTTP APIs<br><span class="filename">draft-nottingham-json-home-02</span></p><h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1><p>This document proposes a "home document" format for non-browser HTTP clients.</p><h1 id="rfc.note.1"><a href="#rfc.note.1">Note to Readers</a></h1><p>This draft should be discussed on the <a href="https://www.ietf.org/mailman/listinfo/apps-discuss">apps-discuss mailing list</a>.</p><h1><a id="rfc.status" href="#rfc.status">Status of this Memo</a></h1><p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p><p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.</p><p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as &#8220;work in progress&#8221;.</p><p>This Internet-Draft will expire on March 17, 2013.</p><h1><a id="rfc.copyrightnotice" href="#rfc.copyrightnotice">Copyright Notice</a></h1><p>Copyright © 2012 IETF Trust and the persons identified as the document authors. All rights reserved.</p><p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p><hr class="noprint"><h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1><ul class="toc"><li>1.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">Introduction</a></li><li>2.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.2">Requirements</a></li><li>3.&nbsp;&nbsp;&nbsp;<a href="#json-home-documents">JSON Home Documents</a></li><li>4.&nbsp;&nbsp;&nbsp;<a href="#resource-objects">Resource Objects</a><ul><li>4.1&nbsp;&nbsp;&nbsp;<a href="#resolving-templates">Resolving Templated Links</a></li></ul></li><li>5.&nbsp;&nbsp;&nbsp;<a href="#resource-hints">Resource Hints</a><ul><li>5.1&nbsp;&nbsp;&nbsp;<a href="#allow">allow</a></li><li>5.2&nbsp;&nbsp;&nbsp;<a href="#representations">representations</a></li><li>5.3&nbsp;&nbsp;&nbsp;<a href="#accept-patch">accept-patch</a></li><li>5.4&nbsp;&nbsp;&nbsp;<a href="#accept-post">accept-post</a></li><li>5.5&nbsp;&nbsp;&nbsp;<a href="#accept-put">accept-put</a></li><li>5.6&nbsp;&nbsp;&nbsp;<a href="#accept-ranges">accept-ranges</a></li><li>5.7&nbsp;&nbsp;&nbsp;<a href="#accept-prefer">prefer</a></li><li>5.8&nbsp;&nbsp;&nbsp;<a href="#docs">docs</a></li><li>5.9&nbsp;&nbsp;&nbsp;<a href="#precondition-req">precondition-req</a></li><li>5.10&nbsp;&nbsp;&nbsp;<a href="#auth-req">auth-req</a></li><li>5.11&nbsp;&nbsp;&nbsp;<a href="#status">status</a></li></ul></li><li>6.&nbsp;&nbsp;&nbsp;<a href="#creating">Creating and Serving Home Documents</a><ul><li>6.1&nbsp;&nbsp;&nbsp;<a href="#managing-change-in-home-documents">Managing Change in Home Documents</a></li><li>6.2&nbsp;&nbsp;&nbsp;<a href="#evolving-and-mixing-apis-with-home-documents">Evolving and Mixing APIs with Home Documents</a></li><li>6.3&nbsp;&nbsp;&nbsp;<a href="#documenting-apis-that-use-home-documents">Documenting APIs that use Home Documents</a></li></ul></li><li>7.&nbsp;&nbsp;&nbsp;<a href="#consuming-home-documents">Consuming Home Documents</a></li><li>8.&nbsp;&nbsp;&nbsp;<a href="#security-considerations">Security Considerations</a></li><li>9.&nbsp;&nbsp;&nbsp;<a href="#iana-considerations">IANA Considerations</a></li><li>10.&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul><li>10.1&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li><li>10.2&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li></ul></li><li><a href="#rfc.authors">Author's Address</a></li><li>A.&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A">Acknowledgements</a></li><li>B.&nbsp;&nbsp;&nbsp;<a href="#frequently-asked-questions">Frequently Asked Questions</a><ul><li>B.1&nbsp;&nbsp;&nbsp;<a href="#why-not-microformats">Why not Microformats?</a></li><li>B.2&nbsp;&nbsp;&nbsp;<a href="#what-about-authentication">What about authentication?</a></li><li>B.3&nbsp;&nbsp;&nbsp;<a href="#what-about-faults-ie-errors">What about 'Faults' (i.e., errors)?</a></li><li>B.4&nbsp;&nbsp;&nbsp;<a href="#rfc.section.B.4">How Do I find the XML Schema / JSON Schema / etc. for a particular media type?</a></li><li>B.5&nbsp;&nbsp;&nbsp;<a href="#rfc.section.B.5">How do I express complex query arguments?</a></li></ul></li><li>C.&nbsp;&nbsp;&nbsp;<a href="#open-issues">Open Issues</a></li></ul><h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;Introduction</h1><p id="rfc.section.1.p.1">There is an emerging preference for non-browser Web applications (colloquially, "HTTP APIs") to use a link-driven approach to their interactions to assure loose coupling, thereby enabling extensibility and API evolution.</p><p id="rfc.section.1.p.2">This is based upon experience with previous APIs that specified static URI paths (such as "http://api.example.com/v1.0/widgets/abc123/properties") have resulted in brittle, tight coupling between clients and servers.</p><p id="rfc.section.1.p.3">Sometimes, these APIs were documented by a document format like <a href="http://www.w3.org/Submission/wadl/">WADL</a> that is used as a design time description; i.e., the URIs and other information they describe are "baked into" client implementations.</p><p id="rfc.section.1.p.4">In contrast, a "follow your nose" API advertises the resources available to clients using link relations <a href="#RFC5988"><cite title="Web Linking">[RFC5988]</cite></a> and the formats they support using internet media types <a href="#RFC4288"><cite title="Media Type Specifications and Registration Procedures">[RFC4288]</cite></a>. A client can then decide &#8211; at run time &#8211; which resources to interact with based upon its capabilities (as described by link relations), and the server can safely add new resources and formats without disturbing clients that are not yet aware of them.</p><p id="rfc.section.1.p.5">As such, the client needs to be able to discover this information quickly and efficiently use it to interact with the server. Just as with a human-targeted home page for a site, we can create a "home document" for a HTTP API that describes it to non-browser clients.</p><p id="rfc.section.1.p.6">Of course, an HTTP API might use any format to do so; however, there are advantages to having a standard home document format. This specification suggests one for consideration, using the JSON format <a href="#RFC4627"><cite title="The application/json Media Type for JavaScript Object Notation (JSON)">[RFC4627]</cite></a>.</p><h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;Requirements</h1><p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119"><cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite></a>.</p><h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a id="json-home-documents" href="#json-home-documents">JSON Home Documents</a></h1><p id="rfc.section.3.p.1">A JSON Home Document uses the format described in <a href="#RFC4627"><cite title="The application/json Media Type for JavaScript Object Notation (JSON)">[RFC4627]</cite></a> and has the media type "application/json-home".</p><p id="rfc.section.3.p.2">Its content consists of a root object with a "resources" property, an object whose names are link relation types (as defined by <a href="#RFC5988"><cite title="Web Linking">[RFC5988]</cite></a>), and values are Resource Objects, defined below.</p><p id="rfc.section.3.p.3">For example:</p><div id="rfc.figure.u.1"></div><pre>
GET / HTTP/1.1
Host: example.org
Accept: application/json-home

HTTP/1.1 200 OK
Content-Type: application/json-home
Cache-Control: max-age=3600
Connection: close

{
  "resources": {
    "http://example.org/rel/widgets": {
      "href": "/widgets/"
    },
    "http://example.org/rel/widget": {
      "href-template": "/widgets/{widget_id}",
      "href-vars": {
        "widget_id": "http://example.org/param/widget"
      },
      "hints": {
        "allow": ["GET", "PUT", "DELETE", "PATCH"],
        "representations": ["application/json"],
        "accept-patch": ["application/json-patch"],
        "accept-post": ["application/xml"],
        "accept-ranges": ["bytes"]
      }
    }
  }
}
</pre><p id="rfc.section.3.p.5">Here, we have a home document that links to a resource, "/widgets/" with the relation "http://example.org/rel/widgets". It also links to an undefined number of resources with the relation type "http://example.org/rel/widget" using a URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>, along with a mapping of several identifiers to specific variables for use in that template.</p><p id="rfc.section.3.p.6">It also gives several hints about interacting with the latter "widget" resources, including the HTTP methods usable with them, the patch formats they accept, and the fact that they support partial requests <a href="#I-D.ietf-httpbis-p5-range"><cite title="HTTP/1.1, part 5: Range Requests and Partial Responses">[I-D.ietf-httpbis-p5-range]</cite></a> using the "bytes" range-specifier.</p><p id="rfc.section.3.p.7">It gives no such hints about the "widgets" resource. This does not mean that it (for example) doesn&#8217;t support any HTTP methods; it means that the client will need to discover this by interacting with the resource, and/or examining the documentation for its link relation type.</p><p id="rfc.section.3.p.8">Note that the properties of a "resources" object MUST be unique; i.e., one Resource Object per relation type.</p><h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a id="resource-objects" href="#resource-objects">Resource Objects</a></h1><p id="rfc.section.4.p.1">A Resource Object links to resources of the defined type using one of two mechanisms; either a direct link (in which case there is exactly one resource of that relation type associated with the API), or a templated link, in which case there are zero to many such resources.</p><p id="rfc.section.4.p.2">Resource Objects MUST have only and exactly one of the "href" and "href-template" properties.</p><p id="rfc.section.4.p.3">Direct links are indicated with an "href" property, whose value is a URI <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a>.</p><p id="rfc.section.4.p.4">Templated links are indicated with an "href-template" property, whose value is a URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>. When "href-template" is present, the Resource Object MUST have a "href-vars" property; see "Resolving Templated Links".</p><p id="rfc.section.4.p.5">In both forms, the links that "href" and "href-template" refer to are URI-references <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> whose base URI is that of the JSON Home Document itself.</p><p id="rfc.section.4.p.6">Resource Objects MAY also have a "hints" property, whose value is an object that uses named Resource Hints as its properties.</p><h2 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1</a>&nbsp;<a id="resolving-templates" href="#resolving-templates">Resolving Templated Links</a></h2><p id="rfc.section.4.1.p.1">A URI can be derived from a Templated Link by treating the "href-template" value as a Level 3 URI Template <a href="#RFC6570"><cite title="URI Template">[RFC6570]</cite></a>, using the "href-vars" property to fill the template.</p><p id="rfc.section.4.1.p.2">The "href-vars" property, in turn, is an object that acts as a mapping between variable names available to the template and absolute URIs that are used as global identifiers for the semantics and syntax of those variables.</p><p id="rfc.section.4.1.p.3">For example, given the following Resource Object:</p><div id="rfc.figure.u.2"></div><pre>
"http://example.org/rel/widget": {
  "href-template": "/widgets/{widget_id}",
  "href-vars": {
    "widget_id": "http://example.org/param/widget"
  },
  "hints": {
    "allow": ["GET", "PUT", "DELETE", "PATCH"],
    "representations": ["application/json"],
    "accept-patch": ["application/json-patch"],
    "accept-post": ["application/xml"],
    "accept-ranges": ["bytes"]
  }
}
</pre><p id="rfc.section.4.1.p.5">If you understand that "http://example.org/param/widget" is an numeric identifier for a widget (perhaps by dereferencing that URL and reading the documentation), you can then find the resource corresponding to widget number 12345 at "http://example.org/widgets/12345" (assuming that the Home Document is located at "http://example.org/").</p><h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a id="resource-hints" href="#resource-hints">Resource Hints</a></h1><p id="rfc.section.5.p.1">Resource hints allow clients to find relevant information about interacting with a resource beforehand, as a means of optimising communications, as well as advertising available behaviours (e.g., to aid in laying out a user interface for consuming the API).</p><p id="rfc.section.5.p.2">Hints are just that &#8211; they are not a "contract", and are to only be taken as advisory. The runtime behaviour of the resource always overrides hinted information.</p><p id="rfc.section.5.p.3">For example, a resource might hint that the PUT method is allowed on all "widget" resources. This means that generally, the user has the ability to PUT to a particular resource, but a specific resource could reject a PUT based upon access control or other considerations. More fine-grained information might be gathered by interacting with the resource (e.g., via a GET), or by another resource "containing" it (such as a "widgets" collection).</p><p id="rfc.section.5.p.4">This specification defines a set of common hints, based upon information that&#8217;s discoverable by directly interacting with resources. A future draft will explain how to define new hints.</p><h2 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a>&nbsp;<a id="allow" href="#allow">allow</a></h2><p id="rfc.section.5.1.p.1">Hints the HTTP methods that the current client will be able to use to interact with the resource; equivalent to the Allow HTTP response header.</p><p id="rfc.section.5.1.p.2">Content MUST be an array of strings, containing HTTP methods.</p><h2 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a>&nbsp;<a id="representations" href="#representations">representations</a></h2><p id="rfc.section.5.2.p.1">Hints the representation types that the resource produces and consumes, using the GET and PUT methods respectively, subject to the &#8216;allow&#8217; hint.</p><p id="rfc.section.5.2.p.2">Content MUST be an array of strings, containing media types.</p><h2 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3</a>&nbsp;<a id="accept-patch" href="#accept-patch">accept-patch</a></h2><p id="rfc.section.5.3.p.1">Hints the PATCH request formats <a href="#RFC5789"><cite title="PATCH Method for HTTP">[RFC5789]</cite></a> accepted by the resource for this client; equivalent to the Accept-Patch HTTP response header.</p><p id="rfc.section.5.3.p.2">Content MUST be an array of strings, containing media types.</p><p id="rfc.section.5.3.p.3">When this hint is present, "PATCH" SHOULD be listed in the "allow" hint.</p><h2 id="rfc.section.5.4"><a href="#rfc.section.5.4">5.4</a>&nbsp;<a id="accept-post" href="#accept-post">accept-post</a></h2><p id="rfc.section.5.4.p.1">Hints the POST request formats accepted by the resource for this client.</p><p id="rfc.section.5.4.p.2">Content MUST be an array of strings, containing media types.</p><p id="rfc.section.5.4.p.3">When this hint is present, "POST" SHOULD be listed in the "allow" hint.</p><h2 id="rfc.section.5.5"><a href="#rfc.section.5.5">5.5</a>&nbsp;<a id="accept-put" href="#accept-put">accept-put</a></h2><p id="rfc.section.5.5.p.1">Hints the PUT request formats accepted by the resource for this client.</p><p id="rfc.section.5.5.p.2">Content MUST be an array of strings, containing media types. If absent, a client MAY assume that any format indicated by the 'representations' hint is acceptable in a PUT.</p><p id="rfc.section.5.5.p.3">When this hint is present, "PUT" SHOULD be listed in the "allow" hint.</p><h2 id="rfc.section.5.6"><a href="#rfc.section.5.6">5.6</a>&nbsp;<a id="accept-ranges" href="#accept-ranges">accept-ranges</a></h2><p id="rfc.section.5.6.p.1">Hints the range-specifiers available to the client for this resource; equivalent to the Accept-Ranges HTTP response header <a href="#I-D.ietf-httpbis-p5-range"><cite title="HTTP/1.1, part 5: Range Requests and Partial Responses">[I-D.ietf-httpbis-p5-range]</cite></a>.</p><p id="rfc.section.5.6.p.2">Content MUST be an array of strings, containing HTTP range-specifiers.</p><h2 id="rfc.section.5.7"><a href="#rfc.section.5.7">5.7</a>&nbsp;<a id="accept-prefer" href="#accept-prefer">prefer</a></h2><p id="rfc.section.5.7.p.1">Hints the preferences <a href="#I-D.snell-http-prefer"><cite title="Prefer Header for HTTP">[I-D.snell-http-prefer]</cite></a> supported by the resource. Note that, as per that specifications, a preference can be ignored by the server.</p><p id="rfc.section.5.7.p.2">Content MUST be an array of strings, contain preferences.</p><h2 id="rfc.section.5.8"><a href="#rfc.section.5.8">5.8</a>&nbsp;<a id="docs" href="#docs">docs</a></h2><p id="rfc.section.5.8.p.1">Hints the location for human-readable documentation for the relation type of the resource.</p><p id="rfc.section.5.8.p.2">Content MUST be a string containing an absolute-URI <a href="#RFC3986"><cite title="Uniform Resource Identifier (URI): Generic Syntax">[RFC3986]</cite></a> referring to documentation that SHOULD be in HTML format.</p><h2 id="rfc.section.5.9"><a href="#rfc.section.5.9">5.9</a>&nbsp;<a id="precondition-req" href="#precondition-req">precondition-req</a></h2><p id="rfc.section.5.9.p.1">Hints that the resource requires state-changing requests (e.g., PUT, PATCH) to include a precondition, as per <a href="#I-D.ietf-httpbis-p4-conditional"><cite title="HTTP/1.1, part 4: Conditional Requests">[I-D.ietf-httpbis-p4-conditional]</cite></a>, to avoid conflicts due to concurrent updates.</p><p id="rfc.section.5.9.p.2">Content MUST be an array of strings, with possible values "etag" and "last-modified" indicating type of precondition expected.</p><h2 id="rfc.section.5.10"><a href="#rfc.section.5.10">5.10</a>&nbsp;<a id="auth-req" href="#auth-req">auth-req</a></h2><p id="rfc.section.5.10.p.1">Hints that the resource requires authentication using the HTTP Authentication Framework <a href="#I-D.ietf-httpbis-p7-auth"><cite title="HTTP/1.1, part 7: Authentication">[I-D.ietf-httpbis-p7-auth]</cite></a>.</p><p id="rfc.section.5.10.p.2">Content MUST be an array of objects, each with a "scheme" property containing a string that corresponds to a HTTP authentication scheme, and optionally a "realms" property containing an array of zero to many strings that identify protection spaces that the resource is a member of.</p><p id="rfc.section.5.10.p.3">For example, a Resource Object might contain the following hint:</p><div id="rfc.figure.u.3"></div><pre>
{
  "auth-req": [
    {
      "scheme": "Basic",
      "realms": ["private"]
    }
  ]
}</pre><h2 id="rfc.section.5.11"><a href="#rfc.section.5.11">5.11</a>&nbsp;<a id="status" href="#status">status</a></h2><p id="rfc.section.5.11.p.1">Hints the status of the resource.</p><p id="rfc.section.5.11.p.2">Content MUST be a string; possible values are:</p><ul><li>"deprecated" - indicates that use of the resource is not recommended, but it is still available.</li><li>"gone" - indicates that the resource is no longer available; i.e., it will return a 410 Gone HTTP status code if accessed.</li></ul><h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a id="creating" href="#creating">Creating and Serving Home Documents</a></h1><p id="rfc.section.6.p.1">When making a home document available, there are a few things to keep in mind:</p><ul><li>A home document is best located at a memorable URI, because its URI will effectively become the URI for the API itself to clients.</li><li>Home documents can be personalised, just as "normal" home pages can. For example, you might advertise different URIs, and/or different kinds of link relations, depending on the client&#8217;s identity.</li><li>Home documents SHOULD be assigned a freshness lifetime (e.g., "Cache-Control: max-age=3600") so that clients can cache them, to avoid having to fetch it every time the client interacts with the service.</li><li>Custom link relation types, as well as the URIs for variables, should lead to documentation for those constructs.</li></ul><h2 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1</a>&nbsp;<a id="managing-change-in-home-documents" href="#managing-change-in-home-documents">Managing Change in Home Documents</a></h2><p id="rfc.section.6.1.p.1">The URIs used in home documents MAY change over time. However, changing them can cause issues for clients that are relying on cached home documents containing old links.</p><p id="rfc.section.6.1.p.2">To mitigate these risks, servers changing links SHOULD consider:</p><ul><li>Reducing the freshness lifetime of home documents before a link change, so that clients are less likely to refer to an "old" document</li><li>Assure that they handle requests for the "old" URIs appropriately; e.g., with a 404 Not Found, or by redirecting the client to the new URI.</li><li>Alternatively, considering the "old" and "new" URIs as equally valid references for an "overlap" period.</li></ul><p id="rfc.section.6.1.p.4">Generally, servers ought not to change URIs without good cause.</p><h2 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2</a>&nbsp;<a id="evolving-and-mixing-apis-with-home-documents" href="#evolving-and-mixing-apis-with-home-documents">Evolving and Mixing APIs with Home Documents</a></h2><p id="rfc.section.6.2.p.1">Using home documents affords the opportunity to change the "shape" of the API over time, without breaking old clients.</p><p id="rfc.section.6.2.p.2">This includes introducing new functions alongside the old ones &#8211; by adding new link relation types with corresponding resource objects &#8211; as well as adding new template variables, media types, and so on.</p><p id="rfc.section.6.2.p.3">It&#8217;s important to realise that a home document can serve more than one "API" at a time; by listing all relevant relation types, it can effectively "mix" different APIs, allowing clients to work with different resources as they see fit.</p><h2 id="rfc.section.6.3"><a href="#rfc.section.6.3">6.3</a>&nbsp;<a id="documenting-apis-that-use-home-documents" href="#documenting-apis-that-use-home-documents">Documenting APIs that use Home Documents</a></h2><p id="rfc.section.6.3.p.1">Another use case for "static" API description formats like WSDL and WADL is to generate documentation for the API from them.</p><p id="rfc.section.6.3.p.2">An API that uses the home document format correctly won&#8217;t have a need to do so, provided that the link relation types and media types it uses are well-documented already.</p><h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a id="consuming-home-documents" href="#consuming-home-documents">Consuming Home Documents</a></h1><p id="rfc.section.7.p.1">Clients might use home documents in a variety of ways.</p><p id="rfc.section.7.p.2">In the most common case &#8211; actually consuming the API &#8211; the client will scan the Resources Object for the link relation(s) that it is interested in, and then to interact with the resource(s) referred to. Resource Hints can be used to optimise communication with the client, as well as to inform as to the permissible actions (e.g., whether PUT is likely to be supported).</p><p id="rfc.section.7.p.3">Note that the home document is a "living" document; it does not represent a "contract", but rather is expected to be inspected before each interaction. In particular, links from the home document MUST NOT be assumed to be valid beyond the freshness lifetime of the home document, as per HTTP&#8217;s caching model <a href="#I-D.ietf-httpbis-p6-cache"><cite title="HTTP/1.1, part 6: Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>.</p><p id="rfc.section.7.p.4">As a result, clients SHOULD cache the home document (as per <a href="#I-D.ietf-httpbis-p6-cache"><cite title="HTTP/1.1, part 6: Caching">[I-D.ietf-httpbis-p6-cache]</cite></a>), to avoid fetching it before every interaction (which would otherwise be required).</p><p id="rfc.section.7.p.5">Likewise, a client encountering a 404 Not Found on a link SHOULD obtain a fresh copy of the home document, to assure that it is up-to-date.</p><h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a id="security-considerations" href="#security-considerations">Security Considerations</a></h1><p id="rfc.section.8.p.1">TBD</p><p id="rfc.section.8.p.2">Clients need to exercise care when using hints. For example, a naive client might send credentials to a server that uses the auth-req hint, without checking to see if those credentials are appropriate for that server.</p><h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;<a id="iana-considerations" href="#iana-considerations">IANA Considerations</a></h1><p id="rfc.section.9.p.1">TBD</p><h1 id="rfc.references"><a id="rfc.section.10" href="#rfc.section.10">10.</a> References</h1><h2 id="rfc.references.1"><a href="#rfc.section.10.1" id="rfc.section.10.1">10.1</a> Normative References</h2><table><tr><td class="reference"><b id="I-D.ietf-httpbis-p6-cache">[I-D.ietf-httpbis-p6-cache]</b></td><td class="top">Fielding, R., Lafon, Y., Nottingham, M., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-19">HTTP/1.1, part 6: Caching</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p6-cache-19 (work in progress), March&nbsp;2012.</td></tr><tr><td class="reference"><b id="RFC2119">[RFC2119]</b></td><td class="top"><a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, &#8220;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>&#8221;, BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr><tr><td class="reference"><b id="RFC3986">[RFC3986]</b></td><td class="top"><a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a>, and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, &#8220;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>&#8221;, STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005.</td></tr><tr><td class="reference"><b id="RFC4627">[RFC4627]</b></td><td class="top">Crockford, D., &#8220;<a href="http://tools.ietf.org/html/rfc4627">The application/json Media Type for JavaScript Object Notation (JSON)</a>&#8221;, RFC&nbsp;4627, July&nbsp;2006.</td></tr><tr><td class="reference"><b id="RFC5988">[RFC5988]</b></td><td class="top">Nottingham, M., &#8220;<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>&#8221;, RFC&nbsp;5988, October&nbsp;2010.</td></tr><tr><td class="reference"><b id="RFC6570">[RFC6570]</b></td><td class="top">Gregorio, J., Fielding, R., Hadley, M., Nottingham, M., and D. Orchard, &#8220;<a href="http://tools.ietf.org/html/rfc6570">URI Template</a>&#8221;, RFC&nbsp;6570, March&nbsp;2012.</td></tr></table><h2 id="rfc.references.2"><a href="#rfc.section.10.2" id="rfc.section.10.2">10.2</a> Informative References</h2><table><tr><td class="reference"><b id="I-D.ietf-httpbis-p4-conditional">[I-D.ietf-httpbis-p4-conditional]</b></td><td class="top">Fielding, R., Lafon, Y., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p4-conditional-19">HTTP/1.1, part 4: Conditional Requests</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p4-conditional-19 (work in progress), March&nbsp;2012.</td></tr><tr><td class="reference"><b id="I-D.ietf-httpbis-p5-range">[I-D.ietf-httpbis-p5-range]</b></td><td class="top">Fielding, R., Lafon, Y., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p5-range-19">HTTP/1.1, part 5: Range Requests and Partial Responses</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p5-range-19 (work in progress), March&nbsp;2012.</td></tr><tr><td class="reference"><b id="I-D.ietf-httpbis-p7-auth">[I-D.ietf-httpbis-p7-auth]</b></td><td class="top">Fielding, R., Lafon, Y., and J. Reschke, &#8220;<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p7-auth-19">HTTP/1.1, part 7: Authentication</a>&#8221;, Internet-Draft&nbsp;draft-ietf-httpbis-p7-auth-19 (work in progress), March&nbsp;2012.</td></tr><tr><td class="reference"><b id="I-D.snell-http-prefer">[I-D.snell-http-prefer]</b></td><td class="top">Snell, J., &#8220;<a href="http://tools.ietf.org/html/draft-snell-http-prefer-12">Prefer Header for HTTP</a>&#8221;, Internet-Draft&nbsp;draft-snell-http-prefer-12 (work in progress), February&nbsp;2012.</td></tr><tr><td class="reference"><b id="RFC4288">[RFC4288]</b></td><td class="top">Freed, N. and J. Klensin, &#8220;<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>&#8221;, BCP&nbsp;13, RFC&nbsp;4288, December&nbsp;2005.</td></tr><tr><td class="reference"><b id="RFC5789">[RFC5789]</b></td><td class="top">Dusseault, L. and J. Snell, &#8220;<a href="http://tools.ietf.org/html/rfc5789">PATCH Method for HTTP</a>&#8221;, RFC&nbsp;5789, March&nbsp;2010.</td></tr></table><div class="avoidbreak"><h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1><address class="vcard"><span class="vcardline"><span class="fn">Mark Nottingham</span><span class="n hidden"><span class="family-name">Nottingham</span><span class="given-name">Mark</span></span></span><span class="vcardline">EMail: <a href="mailto:mnot@mnot.net"><span class="email">mnot@mnot.net</span></a></span><span class="vcardline">URI: <a href="http://www.mnot.net/" class="url">http://www.mnot.net/</a></span></address></div><h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;Acknowledgements</h1><p id="rfc.section.A.p.1">Thanks to Jan Algermissen, Mike Amundsen, Bill Burke, Graham Klyne, Leif Hedstrom, Jeni Tennison and Jorge Williams for their suggestions and feedback.</p><h1 id="rfc.section.B"><a href="#rfc.section.B">B.</a>&nbsp;<a id="frequently-asked-questions" href="#frequently-asked-questions">Frequently Asked Questions</a></h1><h2 id="rfc.section.B.1"><a href="#rfc.section.B.1">B.1</a>&nbsp;<a id="why-not-microformats" href="#why-not-microformats">Why not Microformats?</a></h2><p id="rfc.section.B.1.p.1">Browser-centric Web applications use HTML as their representation format of choice. While it is possible to augment HTML for non-browser clients (using techniques like <a href="http://microformats.org/">Microformats</a> ), a few issues become evident when doing so:</p><ul><li>HTML has a very forgiving syntax. While this is appropriate for browsers (especially considering that there are many million HTML authors in the world), it makes for a less-than-precise language for machines, resulting in both overhead (parsing and transmission) as well as lack of precision.</li><li>HTML is presentation-centric, making it tempting to reformat it from time to time, to improve the "look and feel" of a page. However, doing so can cause comparatively brittle non-browser clients to lose their understanding of the content&#8217;s semantics, unless very careful controls are in place.</li></ul><p id="rfc.section.B.1.p.3">Because of this, it&#8217;s most practical to define a separate format, and JSON is easily machine-readable, precise, and has a better chance of being managed for stability.</p><h2 id="rfc.section.B.2"><a href="#rfc.section.B.2">B.2</a>&nbsp;<a id="what-about-authentication" href="#what-about-authentication">What about authentication?</a></h2><p id="rfc.section.B.2.p.1">In HTTP, authentication is discoverable by interacting with the resource (usually, by getting a 401 Unauthorized response status code, along with one or more challenges). While the home document could hint it, this isn&#8217;t yet done, to avoid possible security complications.</p><h2 id="rfc.section.B.3"><a href="#rfc.section.B.3">B.3</a>&nbsp;<a id="what-about-faults-ie-errors" href="#what-about-faults-ie-errors">What about 'Faults' (i.e., errors)?</a></h2><p id="rfc.section.B.3.p.1">In HTTP, errors are conveyed by HTTP status codes. While this specification could (and even may) allow enumeration of possible error conditions, there&#8217;s a concern that this will encourage applications to define many such "faults", leading to tight coupling between the application and its clients.</p><p id="rfc.section.B.3.p.2">So, this is an area of possible future development; if any such mechanism appears here, it&#8217;s likely to be quite restricted.</p><h2 id="rfc.section.B.4"><a href="#rfc.section.B.4">B.4</a>&nbsp;How Do I find the XML Schema / JSON Schema / etc. for a particular media type?</h2><p id="rfc.section.B.4.p.1">That isn&#8217;t addressed by home documents. Ultimately, it&#8217;s up to the media type accepted and generated by resources to define and constrain (or not) their syntax.</p><h2 id="rfc.section.B.5"><a href="#rfc.section.B.5">B.5</a>&nbsp;How do I express complex query arguments?</h2><p id="rfc.section.B.5.p.1">Complex queries -- i.e., those that exceed the expressive power of Link Templates or would require ambiguous properties of a "resources" object -- aren't intended to be defined by a home document. The appropriate way to do this is with a "form" language, much as HTML defines.</p><p id="rfc.section.B.5.p.2">Future revisions of this specification may define or accommodate the use of such a form in the home document.</p><h1 id="rfc.section.C"><a href="#rfc.section.C">C.</a>&nbsp;<a id="open-issues" href="#open-issues">Open Issues</a></h1><p id="rfc.section.C.p.1">The following is a list of placeholders for open issues.</p><ul><li>Refining and extending representation formats - "application/xml", for example, isn't enough. While a media type for every representation is one answer, something like 'profile' might be good too.</li><li>Object for contact details - do we need an object that describes who's running the API, etc?</li><li>Defining new hints - guidance is needed on minting new hints. Possibly a registry.</li><li>Defining new top-level properties - how new ones are minted, registry, etc.</li><li>Defining new Resource Object properties - how new ones are minted, registry, etc.</li><li>Hint to indicate a POST to 201 Created pattern</li><li>Hint to indicate an "action" POST</li><li>Describe the extensibility model</li><li>Allow resources to expose their links</li></ul></body></html>